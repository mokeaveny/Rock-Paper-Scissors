<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8"/>
</head>

<body>
  <script>

  function computerPlay()
  {
    var randomNum = Math.floor(Math.random() * 3);
    
    if (randomNum == 0)
    {
      return "rock"
    }
    else if (randomNum == 1)
    {
      return "paper"
    }
    else
    {
      return "scissors"
    }

  }

  function playRound(playerSelection, computerSelection, score)
  {
    var pSelection = playerSelection.toLowerCase();
    var result = "Win"
    
    if (computerSelection == "rock")
    {
      if (pSelection == "rock")
      {
        result = "Tie"
      }
      else if (pSelection == "paper")
      {
        result = "Win"
      }
      else
      {
        result = "Lose"
      }
    }

    else if (computerSelection == "paper")
    {
      if (pSelection == "rock")
      {
        result = "Lose"
      }
      else if (pSelection == "paper")
      {
        result = "Tie"
      }
      else
      {
        result = "Win"
      }
    }

    else if (computerSelection == "scissors")
    {
      if (pSelection == "rock")
      {
        result = "Win"
      }
      else if (pSelection == "scissors")
      {
        result = "Tie"
      }
      else
      {
        result = "Lose"
      }
    }
    
    else
    {
      return "The computer didn't select a valid input. You win by default!"
    }
   
    if (result == "Win")
    {
      score += 1
      return ("You Win! " + pSelection + " beats " + computerSelection)
    }
    else if (result == "Tie")
    {
      return ("You Tie! " + pSelection + " ties with " + computerSelection)
    }
    else if (result == "Lose")
    {
      return ("You Lose! " + computerSelection + " beats " + pSelection)
    }
  }
  
  function game()
  {
    var score = 0
    var computerScore = 0
    for (var i = 0; i < 5; i++)
    {
      playerSelection = prompt("Rock, Paper or Scissors...");
      computerSelection = computerPlay()
      roundString = playRound(playerSelection, computerSelection, score)
      playerResultString = roundString.substring(0, 8)
      computerResultString = roundString.substring(0, 9)
      console.log(playRound(playerSelection, computerSelection, score))
      
      if (playerResultString == "You Win!")
      {
        score = score + 1
      }
      else if (computerResultString == "You Lose!")
      {
        computerScore = computerScore + 1
      }
    }
    console.log(score)
    
    if (score > computerScore)
    {
      console.log("You Win the game! You scored " + score.toString() + "!")
    }
    else if (score == computerScore)
    {
      console.log("You Tied the game! You scored " + score.toString() + " and the computer scored " + computerScore.toString() + "!")
    }
    else
    {
      console.log("You Lose the game! You scored " + score.toString() + "!")
    }
  }
  
  game()

  </script>
</body>